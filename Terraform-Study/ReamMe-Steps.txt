Here is the **corrected Terraform configuration** with **detailed comments** explaining each part:  

---

## **ğŸ“‚ Terraform Project Structure**
```
My-Terraform-Project/
â”‚â”€â”€ main.tf          # Defines EC2 instance and security group
â”‚â”€â”€ variables.tf     # Defines input variables (AWS region, AMI, etc.)
â”‚â”€â”€ outputs.tf       # Defines output values (EC2 public IP)
â”‚â”€â”€ terraform.tfstate # Stores current infrastructure state (auto-generated)
```

---

## **ğŸš€ `main.tf` (Terraform Configuration File)**
```hcl
# -----------------------------------------------------
# Terraform Configuration for AWS EC2 Instance & Security Group
# This script provisions an EC2 instance and a security group
# Security Group allows SSH (22) and HTTP (80) access
# Nginx is installed on instance startup
# -----------------------------------------------------

# Specify Terraform version and required providers
terraform {
  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~> 5.0"  # Ensures Terraform uses AWS provider v5.x
    }
  }
}

# Define the AWS Provider
provider "aws" {
  region = var.aws_region  # AWS region is set using a variable
}

# -----------------------------
# ğŸ”¹ Security Group Definition
# -----------------------------
resource "aws_security_group" "web_sg" {
  name        = "web-server-sg"
  description = "Allow SSH and HTTP traffic"

  # ğŸ”¹ Allow SSH (Port 22) from anywhere (for testing)
  ingress {
    from_port   = 22
    to_port     = 22
    protocol    = "tcp"
    cidr_blocks = ["0.0.0.0/0"]  # âš ï¸ Open to all, restrict for production
  }

  # ğŸ”¹ Allow HTTP (Port 80) for Web Traffic
  ingress {
    from_port   = 80
    to_port     = 80
    protocol    = "tcp"
    cidr_blocks = ["0.0.0.0/0"]  # Allow HTTP traffic from any IP
  }

  # ğŸ”¹ Allow all outbound traffic (needed for package installation)
  egress {
    from_port   = 0
    to_port     = 0
    protocol    = "-1"
    cidr_blocks = ["0.0.0.0/0"]  # Allow outgoing traffic to any IP
  }

  tags = {
    Name = "Web-Server-Security-Group"
  }
}

# -----------------------------
# ğŸ”¹ EC2 Instance Definition
# -----------------------------
resource "aws_instance" "web_server" {
  ami           = var.ami_id         # AMI ID (Amazon Machine Image) from variables.tf
  instance_type = var.instance_type  # Instance type from variables.tf
  key_name      = var.key_pair       # SSH Key Pair Name

  # Attach Security Group to EC2
  vpc_security_group_ids = [aws_security_group.web_sg.id]

  # ğŸ”¹ User Data - Install Nginx on Startup
  # This script runs when the instance boots
  user_data = <<-EOF
              #!/bin/bash
              sudo yum update -y
              sudo yum install -y nginx
              sudo systemctl start nginx
              sudo systemctl enable nginx
              EOF

  # Assign a Name tag to the instance
  tags = {
    Name = "Terraform-Web-Server"
  }
}
```

---

## **ğŸš€ `variables.tf` (Defines Configurable Variables)**
```hcl
# -----------------------------------------------
# ğŸ”¹ Terraform Variables (Customizable Settings)
# -----------------------------------------------

# ğŸ”¹ Define AWS region (Default: us-east-1)
variable "aws_region" {
  description = "AWS region where resources will be created"
  default     = "us-east-1"
}

# ğŸ”¹ Define AMI ID (Amazon Linux 2 AMI)
variable "ami_id" {
  description = "AMI ID for EC2 instance"
  default     = "ami-0c55b159cbfafe1f0"  # Replace with a valid AMI ID
}

# ğŸ”¹ Define Instance Type
variable "instance_type" {
  description = "EC2 instance type"
  default     = "t2.micro"  # Free-tier eligible
}

# ğŸ”¹ Define Key Pair Name for SSH Access
variable "key_pair" {
  description = "AWS Key Pair Name for SSH access"
  default     = "your-key-name"  # Replace with actual AWS key pair name
}
```

---

## **ğŸš€ `outputs.tf` (Displays EC2 Public IP After Deployment)**
```hcl
# ----------------------------------------------
# ğŸ”¹ Terraform Output (Displays EC2 Public IP)
# ----------------------------------------------
output "ec2_public_ip" {
  description = "Public IP of the EC2 instance"
  value       = aws_instance.web_server.public_ip
}
```

---

## **ğŸš€ Steps to Deploy the EC2 Instance with Terraform**
### **1ï¸âƒ£ Initialize Terraform**
```bash
terraform init
```
âœ… **Downloads the AWS provider and sets up Terraform.**  

---

### **2ï¸âƒ£ Preview Infrastructure Changes**
```bash
terraform plan
```
âœ… **Shows what Terraform will create before applying changes.**  

---

### **3ï¸âƒ£ Deploy EC2 Instance**
```bash
terraform apply
```
ğŸ“Œ **Terraform will ask for confirmation** â†’ Type **`yes`** and press **Enter**.  
âœ… **Terraform provisions the EC2 instance and security group.**  

---

### **4ï¸âƒ£ Get the EC2 Public IP**
```bash
terraform output
```
âœ… **Displays the public IP of the EC2 instance.**  

Now, **open this IP in a web browser** to check if Nginx is running:
```
http://<your-ec2-public-ip>
```
ğŸ‰ **If everything is correct, you should see the Nginx welcome page!** ğŸš€

---

### **5ï¸âƒ£ Destroy Infrastructure (Cleanup)**
If you no longer need the EC2 instance, **destroy it to avoid AWS charges**:
```bash
terraform destroy
```
ğŸ“Œ **Terraform will ask for confirmation** â†’ Type **`yes`** and press **Enter**.  
âœ… **Terraform deletes all resources.**  

---

## **ğŸ“Œ Summary of Terraform Commands**
| Command | Description |
|---------|------------|
| `terraform init` | Initialize Terraform and download required providers |
| `terraform plan` | Preview the infrastructure before applying |
| `terraform apply` | Create the EC2 instance and security group |
| `terraform output` | Show the public IP of the EC2 instance |
| `terraform destroy` | Delete all resources created by Terraform |

---

## **ğŸš€ Next Steps**
âœ… **Modify the security group** to allow HTTPS (`port 443`).  
âœ… **Use a `terraform.tfvars` file** for environment-specific variables.  
âœ… **Push this Terraform project to GitHub for version control.**  

ğŸ’¡ **Now try deploying this Terraform configuration and let me know if you need help!** ğŸš€ğŸ˜Š